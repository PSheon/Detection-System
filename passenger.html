<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <!-- Theme Made By www.w3schools.com - No Copyright -->
  <title>Smart Bus 智慧公車系統</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
  <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/passenger.css">
  <!-- <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"> -->
  <script src="bootstrap/js/jquery-3.1.1.min.js"></script>
  <script src="bootstrap/js/bootstrap.min.js"></script>
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->

</head>
<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#myPage" style="font-weight:bold;"><i class="fa fa-bus"></i> 智慧公車</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#page_forecast" style="font-weight:bold;"><i class="fa fa-bullhorn" aria-hidden="true"></i>&nbsp;公車報馬仔</a></li>
        <li><a href="#page_envi" style="font-weight:bold;"><i class="fa fa-bar-chart" aria-hidden="true"></i>&nbsp;環境資訊</a></li>
        <li><a href="#page_globe" style="font-weight:bold;"><i class="fa fa-globe"  aria-hidden="true"></i>&nbsp;行車地圖</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="jumbotron text-center">
  <h1>Smart Bus</h1>
  <p>智慧公車系統</p>
</div>

<!-- Container (About Section) -->
<div id="page_forecast" class="container-fluid">
  <div class="row">
    <div class="col-sm-8">
      <h2 class="left">公車報馬仔</h2>
      <p class="left" id="notif_info">車內溫度較低，請多加一件外套</p><br>
    </div>
    <div class="col-sm-4 text-center" style=" display:none; ">
      <span><i class="fa fa-frown-o logo-middle slideanim" aria-hidden="true"></i></span>
      <h4 class="slideanim">車內環境不優良</h4>
    </div>
    <div class="col-sm-12 divide-line"></div>
    <div class="col-sm-12 divide-line-o"></div>
    <div class="col-sm-4 text-center" style=" display:block; ">
      <span><i class="fa fa-umbrella logo-middle slideanim" aria-hidden="true"></i></span>
      <h4 class="slideanim">請攜帶雨具</h4>
    </div>
    <div class="col-sm-4 text-center" style=" display:block; ">
      <span><i class="fa fa-thermometer-quarter logo-middle slideanim" aria-hidden="true"></i></span>
      <h4 class="slideanim">請注意保暖</h4>
    </div>
    <div class="col-sm-4 text-center" style=" display:block; ">
      <span><i class="fa fa-exclamation logo-middle slideanim" aria-hidden="true"></i></span>
      <h4 class="slideanim">請注意空氣品質</h4>
    </div>
    <div class="col-sm-12 divide-line"></div>  
    <div class="col-sm-12 divide-line-o"></div>
    <div class="col-sm-8">
      <h4 class="left">氣象資訊</h4>
      <p class="left" id="notif_weather">東北風影響氣溫稍降，局部地區有短暫雨。<br><br>

        昨天（１５日）東北風逐漸增強，下午開始雲量逐漸增加，一些山區轉為有短暫雨的天氣；溫度方面，各區高溫稍降，為２６至２８度，清晨溫度仍較涼，大多為２０至２３度，台北站區最低溫23.2度，白天高溫27.5度。<br><br>

        今天（１６日）東北風影響，白天氣溫在下降１至２度，高溫約在25至26度，然而各地入夜及清晨低溫約20至21度左右，早出晚歸及南來北往的朋友請留意溫度變化，適時增減衣物；降雨方面，迎風面的地區會有局部短暫雨，山區一帶降雨機率較高。<br><br>
      </p>
    </div>
    <div class="col-sm-4 text-center" style=" display:block; ">
      <span><i class="fa fa-smile-o logo-middle slideanim" aria-hidden="true"></i></span>
      <h4 class="slideanim">車外環境優良</h4>
    </div>
  </div>
</div>

<!-- Container (Services Section) -->
<div id="page_envi" class="container-fluid text-center bg-grey">
  <h2>環境資訊</h2>
  <h4>公車接收到的環境資訊</h4>
  <br>
  <div class="row slideanim">
    <div class="col-sm-4">
      <span><i class="fa fa-thermometer-three-quarters logo-small" aria-hidden="true"></i></span>
      <h4>車外溫度</h4>
      <div class="progress">
        <div class="progress-bar progress-bar-warning" id="temp_bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%; min-width: 35px;">
          未測得
        </div>
      </div>
      <p id="temp_info"></p>
    </div>
    <div class="col-sm-4">
      <span><i class="fa fa-tint logo-small" aria-hidden="true"></i></span>
      <h4>車外濕度</h4>
      <div class="progress">
        <div class="progress-bar progress-bar-warning" id="hum_bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%; min-width: 35px;">
          未測得
        </div>
      </div>
      <p id="hum_info"></p>
    </div>
    <div class="col-sm-4">
      <span><i class="fa fa-sun-o logo-small" aria-hidden="true"></i></span>
      <h4>紫外線指數</h4>
      <div class="progress">
        <div class="progress-bar progress-bar-warning" id="uvi_bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%; min-width: 35px;">
          未測得
        </div>
      </div>
      <p id="uv_info"></p>
    </div>
  </div>
  <br><br>
  <div class="row slideanim">
    <div class="col-sm-4">
      <span><i class="fa fa-thermometer-three-quarters logo-small" aria-hidden="true"></i></span>
      <h4>車內溫度</h4>
      <div class="progress">
        <div class="progress-bar progress-bar-warning" id="temp_in_bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%; min-width: 35px;">
          未測得
        </div>
      </div>
      <p id="temp_in_info"></p>
    </div>
    <div class="col-sm-4">
      <span><i class="fa fa-tint logo-small" aria-hidden="true"></i></span>
      <h4>車內濕度</h4>
      <div class="progress">
        <div class="progress-bar progress-bar-warning" id="hum_in_bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%; min-width: 35px;">
          未測得
        </div>
      </div>
      <p id="hum_in_info"></p>
    </div>
    <div class="col-sm-4">
      <span class="glyphicon glyphicon-certificate logo-small"></span>
      <h4 style="color:#303030;">空氣粉塵數</h4>
      <div class="progress">
        <div class="progress-bar progress-bar-warning" id="pm25_bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%; min-width: 70px;">
          未測得
        </div>
      </div>
      <p id="pm_info"></p>
    </div>
  </div>
</div>

<!-- Google Map -->
<div id="page_globe" class="container-fluid-map text-center">
  <h2>行車地圖</h2>
  <div id="googleMap" style="height:400px;width:100%;"></div>
</div>

<footer class="container-fluid text-center">
  <a href="#myPage" title="To Top">
    <span class="glyphicon glyphicon-chevron-up"></span>
  </a>
  <p> Smart Bus System &copy; 2016</p>
</footer>
<script src="js/passenger.js"></script>
<script src="./socket.io/socket.io.js"></script>
<script src="js/p_socketio.js"></script>
<!-- Add Google Maps -->
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script>
var myCenter = new google.maps.LatLng(25.033194,121.564837);

function initialize() {
var mapProp = {
  center:myCenter,
  zoom:14,
  scrollwheel:false,
  draggable:false,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };

var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

var marker = new google.maps.Marker({
  position:myCenter,
});

socketio.on('Location_emit', function(data) {
  var latitude = data.Lat;
  latitude = latitude.substring(0, latitude.length-1);
  var longitude = data.Long;
  longitude = longitude.substring(0, longitude.length-1);
  
  var location = { lat: parseFloat(latitude), lng: parseFloat(longitude) };
  console.log('lat: '+latitude);
  console.log('lng: '+longitude);
  map.setCenter(location);

  var newMarker = new google.maps.Marker({
    position: location,
    map: map
  });
});

marker.setMap(map);
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>

</body>
</html>
